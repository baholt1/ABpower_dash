---
title: "powerscrape"
format: html
editor: visual
---

```{r}
library(rvest)
library(tidyverse)

aesoDashSource <- read_html('http://ets.aeso.ca/ets_web/ip/Market/Reports/CSDReportServlet')

gas <- aesoDashSource %>% 
  html_elements(css = "table") %>% 
  .[11] %>% 
  html_table() %>% 
  .[[1]] 


type <- colnames(gas)
colnames(gas) <- colnames

gas %>% 
  mutate(type = type[[1]]) %>% 
  mutate(subtype = case_when(
             ASSET %in% c("Simple Cycle", "Cogeneration", "Combined Cycle", "Gas Fired Steam") ~ ASSET)) %>% 
  fill(subtype, .direction = c("down")) %>% 
  filter(!ASSET %in% 
           c("Simple Cycle", "Cogeneration", "Combined Cycle", "Gas Fired Steam", "ASSET"))

```
